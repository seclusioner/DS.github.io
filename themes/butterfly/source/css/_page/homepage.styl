// =====================
// 1. 基礎配色與 Sci-Fi 擴充變數
// =====================
:root
  --recent-post-bgcolor rgba(255, 255, 255, 1)
  --marquee-post-bgcolor rgba(255, 255, 255, 1)
  --marquee-post-color #1a1a1a
  --article-content-bgcolor rgba(0, 191, 255, 0.4)
  --recent-post-wrapper-bg rgba(43, 43, 43, 0.12)
  --card-border-glow rgba(0, 229, 255, 0.6)
  --card-shadow-glow rgba(0, 229, 255, 0.3)
  --card-shadow-hover rgba(0, 229, 255, 0.6)
  --color-cyan #00E5FF
  --color-pink #FF00E5
  --color-purple #7000FF
  --color-gold #FFD700

[data-theme="dark"]
  --recent-post-bgcolor rgba(18, 18, 25, 0.75)
  --marquee-post-bgcolor rgba(18, 18, 25, 0.95)
  --marquee-post-color #ffffff
  --article-content-bgcolor rgba(0, 229, 255, 0.1)
  --recent-post-wrapper-bg rgba(10, 15, 25, 0.65)
  --card-border-glow rgba(29, 185, 255, 0.7)

// =====================
// 2. 全域動畫
// =====================
@keyframes scanMoving
  0%
    background-position 0 -200px, 0 0, 0 0
  100%
    background-position 0 100%, 0 0, 0 0

@keyframes pulseGlow
  0%, 100%
    opacity 0.7
    filter brightness(1)
  50%
    opacity 1
    filter brightness(1.2)

// =====================
// 3. 外層包裹框 (多邊形渲染版)
// =====================
.recent-post-wrapper
  padding 50px 25px 25px 25px
  border-radius 20px
  background var(--recent-post-wrapper-bg) !important
  position relative
  overflow visible
  border 1.5px solid var(--card-border-glow)
  backdrop-filter blur(2px)
  transition all .4s ease
  background-image linear-gradient(to bottom, transparent, var(--color-purple) 50%, transparent),
                  linear-gradient(rgba(0, 229, 255, 0.1) 1px, transparent 1px),
                  linear-gradient(90deg, rgba(0, 229, 255, 0.1) 1px, transparent 1px)
  background-size 100% 300px, 40px 40px, 40px 40px
  animation scanMoving 8s linear infinite

  // A. 正中間的「六角形數位標頭」
  &::after
    content "SYSTEM_CORE  v2.0.4"
    position absolute
    top -16px
    left 50%
    transform translateX(-50%)
    clip-path polygon(10% 0%, 90% 0%, 100% 50%, 90% 100%, 10% 100%, 0% 50%)
    background var(--color-cyan)
    color #000
    font-family "Orbitron", sans-serif
    font-size 10px
    font-weight bold
    padding 5px 30px
    letter-spacing 2px
    white-space nowrap
    box-shadow 0 0 20px var(--color-cyan)
    z-index 10
    transition all 0.3s ease

  // B. 非對稱護角 (多邊形渲染)
  &::before
    content ""
    position absolute
    top 10px; left 10px; right 10px; bottom 10px
    background:
      linear-gradient(135deg, var(--color-cyan) 0%, var(--color-cyan) 50%, transparent 50%) 0 0 / 15px 15px,
      repeating-linear-gradient(-45deg, var(--color-purple), var(--color-purple) 2px, transparent 2px, transparent 6px) 100% 0 / 40px 10px,
      linear-gradient(to right, var(--color-pink) 2px, transparent 2px) 0 100% / 10px 40px,
      radial-gradient(circle at center, var(--color-gold) 30%, transparent 35%) 100% 100% / 15px 15px
    background-repeat no-repeat
    pointer-events none
    z-index 1
    opacity 0.7
    transition all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)

  &:hover
    box-shadow 0 0 50px rgba(0, 229, 255, 0.5), inset 0 0 35px rgba(0, 229, 255, 0.2)
    &::after
      background var(--color-pink)
      color #fff
      box-shadow 0 0 25px var(--color-pink)

// =====================
// 4. 主卡片容器
// =====================
.recent-posts
  padding 0 15px
  z-index 5
  position relative

  .recent-post-item
    margin-bottom 20px
    width 100%
    background var(--recent-post-bgcolor) !important
    overflow hidden
    clip-path polygon(0% 0%, 98% 0%, 100% 15%, 100% 100%, 2% 100%, 0% 85%)
    border-radius 16px
    border 1.5px solid var(--card-border-glow)
    box-shadow 0 0 12px var(--card-shadow-glow)
    transition all .4s ease
    backdrop-filter blur(4px)
    
    &::before
      content ""
      position absolute
      left 0; top 15%; height 70%; width 3px
      background linear-gradient(to bottom, var(--color-cyan), var(--color-purple), var(--color-pink))
      z-index 6

    &:hover
      box-shadow 0 0 25px var(--card-shadow-hover)
      transform scale(1.015)

    .article-content
      background var(--article-content-bgcolor) !important
      position relative
      display flex
      align-items center
      justify-content center
      box-shadow inset 0 0 15px rgba(0,0,0,0.35)
      text-shadow 0 0 6px rgba(0,0,0,0.6)
      transition transform .3s ease
      padding-top 5px /* 增加頂部內邊距以解決文字偏移 */
      &:hover
        transform scale(1.02)
      .article-content-text
        transition all .8s cubic-bezier(0.59,0.01,0.48,1.17)
        display -webkit-box
        -webkit-box-orient vertical
        -webkit-line-clamp 4
        overflow hidden
        color #fff

    .recent-post-cover
      position relative
      background transparent
      img.article-cover
        height 100%
        width 100%
        object-fit cover
        filter saturate(1.1) contrast(1.05)
        transition filter .4s ease

    .recent-post-info
      display flex
      flex-direction column
      position relative
      background var(--recent-post-bgcolor)
      display flex
      backdrop-filter blur(6px)
      box-shadow inset 0 0 12px var(--card-shadow-glow)
      border-top 3px solid var(--card-border-glow)
      align-items center
      min-height 120px /* 設置最小高度，讓容器有足夠的空間 */
      padding-top 40px /* 確保上方有足夠的空間給標題 */

    .article-title
      margin-top 10px /* 加入 margin-top 來提供標題上方的空間 */
      font-size 22px
      line-height 1.5 /* 保證標題有適當的行高 */
      display flex
      justify-content center /* 水平居中 */
      align-items center /* 垂直居中 */
      font-family "Orbitron", sans-serif
      letter-spacing .6px
      color #2a2f38
      text-align center /* 文字居中對齊 */
      
      .article-title-link
        color inherit
        &:hover
          color var(--color-cyan)
          text-shadow 0 0 8px var(--color-cyan)

    .recent-post-meta
      padding 10px 0
      display flex
      flex-direction column
      color #9aa
      .article-meta-wrap
        font-size 12px
        a:hover
          color var(--color-cyan)


// =====================
// 5. 跑馬燈卡片 (六角形變體)
// =====================
.marquee-post
  background var(--marquee-post-bgcolor) !important
  color var(--marquee-post-color) !important
  clip-path polygon(2% 0%, 100% 0%, 98% 100%, 0% 100%)
  border-left 5px solid var(--color-cyan) !important
  border 1px solid var(--card-border-glow)
  box-shadow 0 0 12px var(--card-shadow-glow)
  padding 12px 20px
  margin-bottom 15px
  transition all .3s ease
  animation pulseGlow 2s ease-in-out infinite

  &:hover
    box-shadow 0 0 22px var(--card-shadow-hover)
    transform translateX(5px) skewX(-2deg)

// =====================
// 6. 深色模式修正
// =====================
[data-theme="dark"]
  .recent-post-item .article-title
    color #ffffff !important
  .recent-post-item .article-title-link
    color inherit !important





@media screen and (min-width:600px)
  .recent-post-item
    &:hover
      .recent-post-content
        &.both,
        &.right
          transform translateX(21%)
          transition: all .8s cubic-bezier(0.59, 0.01, 0.48, 1.17)
          &::before
            transition: all .8s cubic-bezier(0.59, 0.01, 0.48, 1.17)
            left: 50px;
          .article-content-text
            margin 20px 20px 20px 60px
        &.left
          transform translateX(-21%)
          transition: all .8s cubic-bezier(0.59, 0.01, 0.48, 1.17)
          &::before
            transition: all .8s cubic-bezier(0.59, 0.01, 0.48, 1.17)
            right: 50px;
          .article-content-text
            margin 20px 60px 20px 20px


    .recent-post-content
      background var(--recent-post-bgcolor)
      position relative
      height 200px
      width 130%
      z-index 0
      display flex
      overflow hidden
      border 0px solid
      &::before
        content: "";
        width: 0;
        height: 0;
        background: transparent;
        position: absolute;
        z-index: 3;
        top: calc(50% - 10px);
        border-top: 10px solid transparent;
        border-bottom: 10px solid transparent;
        transition: all .5s cubic-bezier(0.59, 0.01, 0.48, 1.17)
      &.both,
      &.right
        flex-direction: row;
        left calc(-23.07% - 41px)
        transition: all .5s cubic-bezier(0.59, 0.01, 0.48, 1.17)
        &::before
          left: calc(23.07% + 40px);
          border-left: 6px solid var(--recent-post-triangle);
        .recent-post-info
          &::before
            background linear-gradient(to right, var(--recent-post-cover-shadow), transparent)
            left calc(100% - 1px)
        .article-content
          &::before
            right -59px
            border-left 60px solid var(--article-content-bgcolor)
        .article-content-text
          margin 20px 20px 20px 0px
        .article-title
          padding 0px 30px 0px 70px
        .recent-post-meta
          padding 0px 20px 0px 70px
      &.left
        flex-direction: row-reverse;
        right 9px
        transition: all .5s cubic-bezier(0.59, 0.01, 0.48, 1.17)
        &::before
          right: calc(23.07% + 40px);
          border-right: 6px solid var(--recent-post-triangle);
        .recent-post-info
          &::before
            background linear-gradient(to left, var(--recent-post-cover-shadow), transparent)
            right calc(100% - 1px)
        .article-content
          &::before
            left -59px
            border-right 60px solid var(--article-content-bgcolor)
        .article-content-text
          margin 20px 0px 20px 20px
        .article-title
          padding 0px 70px 0px 30px
        .recent-post-meta
          padding 0px 70px 0px 20px

    .article-content
      width 30%
      height 200px
      left 0
      align-items center
      &::before
        content ""
        width 0
        height 0
        background transparent
        position absolute
        z-index 2
        top 0
        border-top 100px solid transparent
        border-bottom 100px solid transparent
    .recent-post-info
      width 60%
      height 200px
      &::before
        content ""
        width 200px
        height 200px
        position absolute
        z-index 1
        top 0
      .recent-post-meta
        & > .article-meta-wrap
          margin: 6px 0
          color: $theme-meta-color
          font-size: 90%

          & > .post-meta-date
            cursor: default

          .sticky
            color: $sticky-color

          i
            margin: 0 4px 0 0

          .article-meta-label
            if hexo-config('post_meta.page.label')
              padding-right: 4px
            else
              display: none

          .article-meta-separator
            margin: 0 6px

          .article-meta-link
            margin: 0 4px

          if hexo-config('post_meta.page.date_format') == 'relative'
            time
              display: none

          a
            color: $theme-meta-color

            &:hover
              color: $text-hover
              text-decoration: underline
    .recent-post-cover
      width 40%
      height 200px
@media screen and (max-width:600px)
  .recent-post-item
    height 400px
    .recent-post-content
      display flex
      flex-direction: column
      height 400px
      .article-content
        pointer-events none
        order: 1;
        height: 200px;
        position: absolute;
        width: calc(100% - 40px);
        z-index: 3;
        background: rgba(22,22,22,0.5);
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
        display: none
        opacity: 0
        .article-content-text
          height 120px
          color: white;
          width: 80%

      .recent-post-cover
        order: 2
        height 200px
        transition: all .5s
      .recent-post-info
        order: 3
        height 200px
        &::before
          content: '';
          width: 0;
          height: 0;
          position: absolute;
          z-index: 3;
          bottom: calc(100% - 4px);
          left: 0;
          border-bottom: 50px solid var(--recent-post-bgcolor);
          border-right: 300px solid transparent;
        &::after
          content: '';
          width: 0;
          height: 0;
          position: absolute;
          z-index: 3;
          bottom: calc(100% + 150px);
          right: 0;
          border-top: 50px solid var(--recent-post-bgcolor);
          border-left: 300px solid transparent;
        .article-title
          padding: 0px 35px 0px 35px
        .recent-post-meta
          padding: 0px 30px 0px 30px
    &:hover
      .article-content
        display: flex !important;
        animation: shutter-effect-content 0.5s 2 forwards linear
      .recent-post-info
        &::before
          animation: shutter-effect-left 0.5s 1 ease-in-out
        &::after
          animation: shutter-effect-right 0.5s 1 ease-in-out
      .recent-post-cover
        filter blur(2px)
@keyframes shutter-effect-right  {
  0%{
    bottom: calc(100% + 150px);
    border-top: 50px solid var(--recent-post-bgcolor);
    border-left: 300px solid transparent;
  }
  50%{
    bottom: 100%;
    border-top: 200px solid var(--recent-post-bgcolor);
    border-left: 600px solid transparent;
  }
  100%{
    bottom: calc(100% + 150px);
    border-top: 50px solid var(--recent-post-bgcolor);
    border-left: 300px solid transparent;
  }
}
@keyframes shutter-effect-left  {
  0%{
    bottom: calc(100% - 4px);
    border-bottom: 50px solid var(--recent-post-bgcolor);
    border-right: 300px solid transparent;
  }
  50%{
    bottom: calc(100% - 4px);
    border-bottom: 200px solid var(--recent-post-bgcolor);
    border-right: 600px solid transparent;
  }
  100%{
    bottom: calc(100% - 4px);
    border-bottom: 50px solid var(--recent-post-bgcolor);
    border-right: 300px solid transparent;
  }
}
@keyframes shutter-effect-content {
  from {
    opacity: 0
  }
  to {
    opacity: 1
  }
}